<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get data to run the PePS2 trial example — peps2_get_data • trialr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get data to run the PePS2 trial example — peps2_get_data" />

<meta property="og:description" content="Get data to run the BEBOP model in the PePS2 trial. The trial
investigates pembrolizumab in non-small-cell lung cancer. Patients may be
previously treated (PT) or treatment naive (TN). Pembro response rates in
lung cancer have been shown to increase with PD-L1 tumour proportion score.
PD-L1 score is measured at baseline. Each patient belongs to one of the Low,
Medium or High categories. These two baseline variables stratify the patient
population and are used as predictive variables to stratify the analysis.
The BEBOP model studies co-primary efficacy and toxicity outcomes in the
presence of predictive data. Thus, PePS2 studies efficacy and toxicity in
6 distinct cohorts:
TN Low, TN Medium, TN High, PT Low, PT Medium, PT High.
The design admits all-comers and does not target specific sample sizes in the
individual cohorts.
Hyperprior parameters have defaults to match those used in PePS2, but all may
be overridden.
The returned object includes randomly-sampled outcomes, as well as parameters
to run the model. These are all combined in the same list object for passing
to RStan, as is the convention.
See the accompanying vignette for a full description." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trialr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BEBOP.html">BEBOP in PePS2</a>
    </li>
    <li>
      <a href="../articles/CRM-visualisation.html">Visualisation with CRM</a>
    </li>
    <li>
      <a href="../articles/CRM.html">Continual Reassessment Method</a>
    </li>
    <li>
      <a href="../articles/EffTox.html">EffTox in trialr</a>
    </li>
    <li>
      <a href="../articles/HierarchicalBayesianResponse.html">Hierarchical Bayesian Model for Binary Responses</a>
    </li>
    <li>
      <a href="../articles/trialr-overview.html">Overview of trialr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/brockk/trialr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get data to run the PePS2 trial example</h1>
    <small class="dont-index">Source: <a href='https://github.com/brockk/trialr/blob/master/R/peps2.R'><code>R/peps2.R</code></a></small>
    <div class="hidden name"><code>peps2_get_data.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Get data to run the BEBOP model in the PePS2 trial. The trial
investigates pembrolizumab in non-small-cell lung cancer. Patients may be
previously treated (PT) or treatment naive (TN). Pembro response rates in
lung cancer have been shown to increase with PD-L1 tumour proportion score.
PD-L1 score is measured at baseline. Each patient belongs to one of the Low,
Medium or High categories. These two baseline variables stratify the patient
population and are used as predictive variables to stratify the analysis.
The BEBOP model studies co-primary efficacy and toxicity outcomes in the
presence of predictive data. Thus, PePS2 studies efficacy and toxicity in
6 distinct cohorts:
TN Low, TN Medium, TN High, PT Low, PT Medium, PT High.
The design admits all-comers and does not target specific sample sizes in the
individual cohorts.
Hyperprior parameters have defaults to match those used in PePS2, but all may
be overridden.
The returned object includes randomly-sampled outcomes, as well as parameters
to run the model. These are all combined in the same list object for passing
to RStan, as is the convention.
See the accompanying vignette for a full description.</p>
    
    </div>

    <pre class="usage"><span class='fu'>peps2_get_data</span>(<span class='no'>num_patients</span>, <span class='kw'>cohort_probs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>prob_eff</span>, <span class='no'>prob_tox</span>,
  <span class='no'>eff_tox_or</span>, <span class='kw'>cohort_rho</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>15.7</span>, <span class='fl'>21.8</span>, <span class='fl'>12.4</span>, <span class='fl'>20.7</span>, <span class='fl'>18</span>, <span class='fl'>11.4</span>),
  <span class='kw'>alpha_mean</span> <span class='kw'>=</span> -<span class='fl'>2.2</span>, <span class='kw'>alpha_sd</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>beta_mean</span> <span class='kw'>=</span> -<span class='fl'>0.5</span>, <span class='kw'>beta_sd</span> <span class='kw'>=</span> <span class='fl'>2</span>,
  <span class='kw'>gamma_mean</span> <span class='kw'>=</span> -<span class='fl'>0.5</span>, <span class='kw'>gamma_sd</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>zeta_mean</span> <span class='kw'>=</span> -<span class='fl'>0.5</span>, <span class='kw'>zeta_sd</span> <span class='kw'>=</span> <span class='fl'>2</span>,
  <span class='kw'>lambda_mean</span> <span class='kw'>=</span> -<span class='fl'>2.2</span>, <span class='kw'>lambda_sd</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>psi_mean</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>psi_sd</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>num_patients</th>
      <td><p>Total number of patients to use, positive integer.</p></td>
    </tr>
    <tr>
      <th>cohort_probs</th>
      <td><p>Probabilities that a patient belongs to each of the 6
cohorts, in the order given above; a vector of numbers between 0 and 1 that
add up to 1. <code>cohort_probs</code> or <code>cohort_rho</code> must be specified.</p></td>
    </tr>
    <tr>
      <th>prob_eff</th>
      <td><p>Probabilities of efficacy in each of the 6 cohorts, in the
order given above; a vector of numbers between 0 and 1</p></td>
    </tr>
    <tr>
      <th>prob_tox</th>
      <td><p>Probabilities of toxicity in each of the 6 cohorts, in the
order given above; a vector of numbers between 0 and 1</p></td>
    </tr>
    <tr>
      <th>eff_tox_or</th>
      <td><p>Measure of strength of association between efficacy and
toxicity, in each of the 6 cohorts, in the order given above; a vector of
numbers. Use 1 for no association; numbers increasingly greater than 1 for
stronger positive associations, and numbers less than 1 for stronger negative
associations</p></td>
    </tr>
    <tr>
      <th>cohort_rho</th>
      <td><p>Concentration parameters for cohort membership, in the
order given above, using a Dirichlet distribution. This leads to randomly-
sampled cohort sizes distributed Dir(cohort_rho). <code>cohort_probs</code> or
<code>cohort_rho</code> must be specified.</p></td>
    </tr>
    <tr>
      <th>alpha_mean</th>
      <td><p>The prior mean of alpha. Alpha is the efficacy model
intercept.</p></td>
    </tr>
    <tr>
      <th>alpha_sd</th>
      <td><p>The prior standard deviation of alpha. Alpha is the efficacy
model  intercept.</p></td>
    </tr>
    <tr>
      <th>beta_mean</th>
      <td><p>The prior mean of beta. Beta is the efficacy model term
for being previously treated.</p></td>
    </tr>
    <tr>
      <th>beta_sd</th>
      <td><p>The prior standard deviation of beta. Beta is the efficacy
model term for being previously treated.</p></td>
    </tr>
    <tr>
      <th>gamma_mean</th>
      <td><p>The prior mean of gamma. Gamma is the efficacy model term
for being PD-L1 score = Low.</p></td>
    </tr>
    <tr>
      <th>gamma_sd</th>
      <td><p>The prior standard deviation of gamma. Gamma is the efficacy
model term for being PD-L1 score = Low.</p></td>
    </tr>
    <tr>
      <th>zeta_mean</th>
      <td><p>The prior mean of zeta. Zeta is the efficacy model term
for being PD-L1 score = Medium.</p></td>
    </tr>
    <tr>
      <th>zeta_sd</th>
      <td><p>The prior standard deviation of zeta. Zeta is the efficacy
model term for being PD-L1 score = Medium.</p></td>
    </tr>
    <tr>
      <th>lambda_mean</th>
      <td><p>The prior mean of lambda. Lambda is the toxicity model
intercept.</p></td>
    </tr>
    <tr>
      <th>lambda_sd</th>
      <td><p>The prior standard deviation of lambda. Lambda is the
toxicity model intercept.</p></td>
    </tr>
    <tr>
      <th>psi_mean</th>
      <td><p>The prior mean of psi. Psi is the joint model association
parameter.</p></td>
    </tr>
    <tr>
      <th>psi_sd</th>
      <td><p>The prior standard deviation of psi. Psi is the joint model
association parameter.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a <code>list</code> of parameters, described in <code>peps2_params</code></p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='peps2_params.html'>peps2_params</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>peps2_get_data</span>(<span class='kw'>num_patients</span> <span class='kw'>=</span> <span class='fl'>60</span>,
                      <span class='kw'>prob_eff</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.167</span>, <span class='fl'>0.192</span>, <span class='fl'>0.5</span>, <span class='fl'>0.091</span>, <span class='fl'>0.156</span>, <span class='fl'>0.439</span>),
                      <span class='kw'>prob_tox</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>0.1</span>, <span class='fl'>6</span>),
                      <span class='kw'>eff_tox_or</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='fl'>6</span>))
<span class='no'>samp</span> <span class='kw'>=</span> <span class='kw pkg'>rstan</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/rstan/topics/stanmodel-method-sampling'>sampling</a></span>(<span class='no'>stanmodels</span>$<span class='no'>BebopInPeps2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>dat</span>)</div><div class='output co'>#&gt; <span class='message'>trying deprecated constructor; please alert package maintainer</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 1).
#&gt; Chain 1: Gradient evaluation took 4.4e-05 seconds
#&gt; Chain 1: 1000 transitions using 10 leapfrog steps per transition would take 0.44 seconds.
#&gt; Chain 1: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 1: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 1: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 1: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 1: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 1: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 1: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 1: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 1: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 1: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 1: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 1: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 1:  Elapsed Time: 0.3312 seconds (Warm-up)
#&gt; Chain 1:                0.370094 seconds (Sampling)
#&gt; Chain 1:                0.701294 seconds (Total)
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 2).
#&gt; Chain 2: Gradient evaluation took 4.7e-05 seconds
#&gt; Chain 2: 1000 transitions using 10 leapfrog steps per transition would take 0.47 seconds.
#&gt; Chain 2: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 2: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 2: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 2: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 2: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 2: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 2: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 2: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 2: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 2: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 2: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 2: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 2:  Elapsed Time: 0.360806 seconds (Warm-up)
#&gt; Chain 2:                0.333219 seconds (Sampling)
#&gt; Chain 2:                0.694025 seconds (Total)
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 3).
#&gt; Chain 3: Gradient evaluation took 3e-05 seconds
#&gt; Chain 3: 1000 transitions using 10 leapfrog steps per transition would take 0.3 seconds.
#&gt; Chain 3: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 3: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 3: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 3: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 3: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 3: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 3: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 3: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 3: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 3: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 3: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 3: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 3:  Elapsed Time: 0.329632 seconds (Warm-up)
#&gt; Chain 3:                0.383096 seconds (Sampling)
#&gt; Chain 3:                0.712728 seconds (Total)
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 4).
#&gt; Chain 4: Gradient evaluation took 3.1e-05 seconds
#&gt; Chain 4: 1000 transitions using 10 leapfrog steps per transition would take 0.31 seconds.
#&gt; Chain 4: Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Chain 4: Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Chain 4: Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Chain 4: Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Chain 4: Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Chain 4: Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Chain 4: Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Chain 4: Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Chain 4: Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Chain 4: Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Chain 4: Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Chain 4: Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; Chain 4:  Elapsed Time: 0.341127 seconds (Warm-up)
#&gt; Chain 4:                0.360864 seconds (Sampling)
#&gt; Chain 4:                0.701991 seconds (Total)</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kristian Brock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

