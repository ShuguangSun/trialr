<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Process RStan samples from a BEBOP model fit to PePS2 data — peps2_process • trialr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Process RStan samples from a BEBOP model fit to PePS2 data — peps2_process" />

<meta property="og:description" content="Process RStan samples from a BEBOP model fit to PePS2 data. This
step lets us make inferences about whether the modelled efficacy and toxicity
probabilities suggest the treatment is acceptable in each of the cohorts
under study.
The parameters have default values to match those used in the PePS2 trial.
See the accompanying vignette for a full description." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trialr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BEBOP.html">BEBOP in PePS2</a>
    </li>
    <li>
      <a href="../articles/CRM-visualisation.html">Visualisation with CRM in `trialr`</a>
    </li>
    <li>
      <a href="../articles/CRM.html">Continual Reassessment Method in `trialr`</a>
    </li>
    <li>
      <a href="../articles/EffTox.html">EffTox in trialr</a>
    </li>
    <li>
      <a href="../articles/HierarchicalBayesianResponse.html">Hierarchical Bayesian Model for Binary Responses</a>
    </li>
    <li>
      <a href="../articles/trialr-overview.html">Overview of `trialr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/brockk/trialr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Process RStan samples from a BEBOP model fit to PePS2 data</h1>
    <small class="dont-index">Source: <a href='https://github.com/brockk/trialr/blob/master/R/peps2.R'><code>R/peps2.R</code></a></small>
    <div class="hidden name"><code>peps2_process.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Process RStan samples from a BEBOP model fit to PePS2 data. This
step lets us make inferences about whether the modelled efficacy and toxicity
probabilities suggest the treatment is acceptable in each of the cohorts
under study.
The parameters have default values to match those used in the PePS2 trial.
See the accompanying vignette for a full description.</p>
    
    </div>

    <pre class="usage"><span class='fu'>peps2_process</span>(<span class='no'>dat</span>, <span class='no'>fit</span>, <span class='kw'>min_eff</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>max_tox</span> <span class='kw'>=</span> <span class='fl'>0.3</span>, <span class='kw'>eff_cert</span> <span class='kw'>=</span> <span class='fl'>0.7</span>,
  <span class='kw'>tox_cert</span> <span class='kw'>=</span> <span class='fl'>0.9</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>An instance of <code><a href='peps2_params.html'>peps2_params</a></code>, a list of PePS2
data and parameters. An example is yielded by <code><a href='peps2_get_data.html'>peps2_get_data</a></code>.</p></td>
    </tr>
    <tr>
      <th>fit</th>
      <td><p>An instance of <code>rstan::stanmodel</code>, derived by fitting data to
the BEBOP in PePS2 model.
Use <code>stan::sampling(stanmodels$BebopInPeps2, data = dat)</code>.</p></td>
    </tr>
    <tr>
      <th>min_eff</th>
      <td><p>The lower efficacy probability threshold; a number between 0
and 1.</p></td>
    </tr>
    <tr>
      <th>max_tox</th>
      <td><p>The upper toxicity probability threshold; a number between 0
and 1.</p></td>
    </tr>
    <tr>
      <th>eff_cert</th>
      <td><p>Certainty required to infer the treatment is acceptable with
regards to being probably efficacious; a number between 0 and 1.</p></td>
    </tr>
    <tr>
      <th>tox_cert</th>
      <td><p>Certainty required to infer the treatment is acceptable with
regards to being probably tolerable; a number between 0 and 1.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list with the following items:</p><ul>
<li><p><code>ProbEff</code>, the posterior mean probability of efficacy in the 6
cohorts.</p></li>
<li><p><code>ProbAccEff</code>, the posterior mean probability that the probability
of efficacy exceeds <code>min_eff</code>, in the 6 cohorts.</p></li>
<li><p><code>ProbTox</code>, the posterior mean probability of toxicity in the 6
cohorts.</p></li>
<li><p><code>ProbAccTox</code>, the posterior mean probability that the probability
of toxicity is less than <code>max_tox</code>, in the 6 cohorts.</p></li>
<li><p><code>Accept</code>, a vector of logical values to show whether treatment
should be accepted in the 6 cohorts. Treatment is acceptable when it is
probably efficacious and probably not toxic, with respect to the described
rules.</p></li>
<li><p><code>alpha</code>, the posterior mean estimate of alpha.</p></li>
<li><p><code>beta</code>, the posterior mean estimate of beta.</p></li>
<li><p><code>gamma</code>, the posterior mean estimate of gamma.</p></li>
<li><p><code>zeta</code>, the posterior mean estimate of zeta.</p></li>
<li><p><code>lambda</code>, the posterior mean estimate of lambda.</p></li>
<li><p><code>psi</code>, the posterior mean estimate of psi.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='peps2_params.html'>peps2_params</a></code></p>
<p><code><a href='peps2_get_data.html'>peps2_get_data</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>set.seed</span>(<span class='fl'>123</span>)
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='peps2_get_data.html'>peps2_get_data</a></span>(<span class='kw'>num_patients</span> <span class='kw'>=</span> <span class='fl'>60</span>,
                      <span class='kw'>prob_eff</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0.167</span>, <span class='fl'>0.192</span>, <span class='fl'>0.5</span>,
                                   <span class='fl'>0.091</span>, <span class='fl'>0.156</span>, <span class='fl'>0.439</span>),
                      <span class='kw'>prob_tox</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>0.1</span>, <span class='fl'>6</span>),
                      <span class='kw'>eff_tox_or</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>, <span class='fl'>6</span>))
<span class='no'>samp</span> <span class='kw'>=</span> <span class='kw pkg'>rstan</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/rstan/topics/stanmodel-method-sampling'>sampling</a></span>(<span class='no'>stanmodels</span>$<span class='no'>BebopInPeps2</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>dat</span>)</div><div class='output co'>#&gt; <span class='message'>trying deprecated constructor; please alert package maintainer</span></div><div class='output co'>#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 1).
#&gt; 
#&gt; Gradient evaluation took 0.000198 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 1.98 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 2.42734 seconds (Warm-up)
#&gt;                2.52547 seconds (Sampling)
#&gt;                4.95281 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 2).
#&gt; 
#&gt; Gradient evaluation took 0.000176 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 1.76 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 2.49147 seconds (Warm-up)
#&gt;                2.39924 seconds (Sampling)
#&gt;                4.89071 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 3).
#&gt; 
#&gt; Gradient evaluation took 0.000176 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 1.76 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 2.41128 seconds (Warm-up)
#&gt;                2.77817 seconds (Sampling)
#&gt;                5.18946 seconds (Total)
#&gt; 
#&gt; 
#&gt; SAMPLING FOR MODEL 'BebopInPeps2' NOW (CHAIN 4).
#&gt; 
#&gt; Gradient evaluation took 0.000177 seconds
#&gt; 1000 transitions using 10 leapfrog steps per transition would take 1.77 seconds.
#&gt; Adjust your expectations accordingly!
#&gt; 
#&gt; 
#&gt; Iteration:    1 / 2000 [  0%]  (Warmup)
#&gt; Iteration:  200 / 2000 [ 10%]  (Warmup)
#&gt; Iteration:  400 / 2000 [ 20%]  (Warmup)
#&gt; Iteration:  600 / 2000 [ 30%]  (Warmup)
#&gt; Iteration:  800 / 2000 [ 40%]  (Warmup)
#&gt; Iteration: 1000 / 2000 [ 50%]  (Warmup)
#&gt; Iteration: 1001 / 2000 [ 50%]  (Sampling)
#&gt; Iteration: 1200 / 2000 [ 60%]  (Sampling)
#&gt; Iteration: 1400 / 2000 [ 70%]  (Sampling)
#&gt; Iteration: 1600 / 2000 [ 80%]  (Sampling)
#&gt; Iteration: 1800 / 2000 [ 90%]  (Sampling)
#&gt; Iteration: 2000 / 2000 [100%]  (Sampling)
#&gt; 
#&gt;  Elapsed Time: 2.49453 seconds (Warm-up)
#&gt;                2.64767 seconds (Sampling)
#&gt;                5.1422 seconds (Total)
#&gt; </div><div class='input'><span class='no'>decision</span> <span class='kw'>&lt;-</span> <span class='fu'>peps2_process</span>(<span class='no'>dat</span>, <span class='no'>samp</span>)
<span class='no'>decision</span>$<span class='no'>Accept</span>   <span class='co'># Accept in cohort 2, 3, 5, 6 but not 1, 4</span></div><div class='output co'>#&gt; [1] FALSE  TRUE  TRUE FALSE  TRUE  TRUE</div><div class='input'><span class='no'>decision</span>$<span class='no'>ProbEff</span>  <span class='co'># The probability of efficacy is driving that decision</span></div><div class='output co'>#&gt; [1] 0.07441455 0.24984030 0.42934468 0.04037307 0.14885626 0.28395153</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kristian Brock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

