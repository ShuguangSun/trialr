<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fit an EffTox model — stan_efftox • trialr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Fit an EffTox model — stan_efftox" />

<meta property="og:description" content="Fit an EffTox model using Stan for full Bayesian inference." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trialr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/BEBOP.html">BEBOP in PePS2</a>
    </li>
    <li>
      <a href="../articles/CRM-visualisation.html">Visualisation with CRM in `trialr`</a>
    </li>
    <li>
      <a href="../articles/CRM.html">Continual Reassessment Method in `trialr`</a>
    </li>
    <li>
      <a href="../articles/EffTox.html">EffTox in trialr</a>
    </li>
    <li>
      <a href="../articles/HierarchicalBayesianResponse.html">Hierarchical Bayesian Model for Binary Responses</a>
    </li>
    <li>
      <a href="../articles/trialr-overview.html">Overview of `trialr`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/brockk/trialr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fit an EffTox model</h1>
    <small class="dont-index">Source: <a href='https://github.com/brockk/trialr/blob/master/R/EffTox.R'><code>R/EffTox.R</code></a></small>
    <div class="hidden name"><code>stan_efftox.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Fit an EffTox model using Stan for full Bayesian inference.</p>
    
    </div>

    <pre class="usage"><span class='fu'>stan_efftox</span>(<span class='kw'>outcome_str</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>real_doses</span>, <span class='no'>efficacy_hurdle</span>, <span class='no'>toxicity_hurdle</span>,
  <span class='no'>p_e</span>, <span class='no'>p_t</span>, <span class='no'>eff0</span>, <span class='no'>tox1</span>, <span class='no'>eff_star</span>, <span class='no'>tox_star</span>, <span class='no'>alpha_mean</span>, <span class='no'>alpha_sd</span>, <span class='no'>beta_mean</span>,
  <span class='no'>beta_sd</span>, <span class='no'>gamma_mean</span>, <span class='no'>gamma_sd</span>, <span class='no'>zeta_mean</span>, <span class='no'>zeta_sd</span>, <span class='no'>eta_mean</span>, <span class='no'>eta_sd</span>, <span class='no'>psi_mean</span>,
  <span class='no'>psi_sd</span>, <span class='kw'>doses_given</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>eff</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>tox</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>outcome_str</th>
      <td><p>A string representing the outcomes observed hitherto.
See <code><a href='efftox_parse_outcomes.html'>efftox_parse_outcomes</a></code> for a description of syntax and
examples. Alternatively, you may provide <code>doses_given</code>, <code>eff</code> and
<code>tox</code> parameters. See Details.</p></td>
    </tr>
    <tr>
      <th>real_doses</th>
      <td><p>A vector of numbers.The doses under investigation. They
should be ordered from lowest to highest and be in consistent units.
E.g., #' to conduct a dose-finding trial of doses 10mg, 20mg and 50mg, use
c(10, 20, 50).</p></td>
    </tr>
    <tr>
      <th>efficacy_hurdle</th>
      <td><p>Minimum acceptable efficacy probability.
A number between 0 and 1.</p></td>
    </tr>
    <tr>
      <th>toxicity_hurdle</th>
      <td><p>Maximum acceptable toxicity probability.
A number between 0 and 1.</p></td>
    </tr>
    <tr>
      <th>p_e</th>
      <td><p>Certainty required to infer a dose is acceptable with regards to
being probably efficacious; a number between 0 and 1.</p></td>
    </tr>
    <tr>
      <th>p_t</th>
      <td><p>Certainty required to infer a dose is acceptable with regards to
being probably tolerable; a number between 0 and 1.</p></td>
    </tr>
    <tr>
      <th>eff0</th>
      <td><p>Efficacy probability required when toxicity is impossible;
a number between 0 and 1 (see Details).</p></td>
    </tr>
    <tr>
      <th>tox1</th>
      <td><p>Toxicity probability permitted when efficacy is guaranteed;
a number between 0 and 1 (see Details).</p></td>
    </tr>
    <tr>
      <th>eff_star</th>
      <td><p>Efficacy probability of an equi-utility third point (see
Details).</p></td>
    </tr>
    <tr>
      <th>tox_star</th>
      <td><p>Toxicity probability of an equi-utility third point (see
Details).</p></td>
    </tr>
    <tr>
      <th>alpha_mean</th>
      <td><p>The prior normal mean of the intercept term in the toxicity
logit model. A number.</p></td>
    </tr>
    <tr>
      <th>alpha_sd</th>
      <td><p>The prior normal standard deviation of the intercept term in
the toxicity logit model. A number.</p></td>
    </tr>
    <tr>
      <th>beta_mean</th>
      <td><p>The prior normal mean of the slope term in the toxicity
logit model. A number.</p></td>
    </tr>
    <tr>
      <th>beta_sd</th>
      <td><p>The prior normal standard deviation of the slope term in the
toxicity logit model. A number.</p></td>
    </tr>
    <tr>
      <th>gamma_mean</th>
      <td><p>The prior normal mean of the intercept term in the efficacy
logit model. A number.</p></td>
    </tr>
    <tr>
      <th>gamma_sd</th>
      <td><p>The prior normal standard deviation of the intercept term in
the efficacy logit model. A number.</p></td>
    </tr>
    <tr>
      <th>zeta_mean</th>
      <td><p>The prior normal mean of the slope term in the efficacy logit
model. A number.</p></td>
    </tr>
    <tr>
      <th>zeta_sd</th>
      <td><p>The prior normal standard deviation of the slope term in the
efficacy logit model. A number.</p></td>
    </tr>
    <tr>
      <th>eta_mean</th>
      <td><p>The prior normal mean of the squared term coefficient in the
efficacy logit model. A number.</p></td>
    </tr>
    <tr>
      <th>eta_sd</th>
      <td><p>The prior normal standard deviation of the squared term
coefficient in the efficacy logit model. A number.</p></td>
    </tr>
    <tr>
      <th>psi_mean</th>
      <td><p>The prior normal mean of the association term in the combined
efficacy-toxicity model. A number.</p></td>
    </tr>
    <tr>
      <th>psi_sd</th>
      <td><p>The prior normal standard deviation of the association term in
the combined efficacy-toxicity model. A number.</p></td>
    </tr>
    <tr>
      <th>doses_given</th>
      <td><p>A optional vector of dose-levels given to patients
1:num_patients, where 1=lowest dose, 2=second dose, etc. Only required when
<code>outcome_str</code> is not provided.</p></td>
    </tr>
    <tr>
      <th>eff</th>
      <td><p>An optional vector of efficacy outcomes for patients
1:num_patients, where 1=efficacy and 0=no efficacy. Only required when
<code>outcome_str</code> is not provided.</p></td>
    </tr>
    <tr>
      <th>tox</th>
      <td><p>An optional vector of toxicity outcomes for patients
1:num_patients, where 1=toxicity and 0=no toxicity. Only required when
<code>outcome_str</code> is not provided.</p></td>
    </tr>
    <tr>
      <th>...Extra</th>
      <td><p>parameters are passed to <code><a href='http://www.rdocumentation.org/packages/rstan/topics/stanmodel-method-sampling'>rstan::sampling</a></code>. Commonly
used options are <code>iter</code>, <code>chains</code>, <code>warmup</code>, <code>cores</code>,
<code>control</code>. <code><a href='http://www.rdocumentation.org/packages/rstan/topics/stanmodel-method-sampling'>sampling</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code><a href='efftox_fit-class.html'>efftox_fit</a></code></p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The quickest and easiest way to fit an EffTox model to some observed outcomes
is to describe the outcomes using <span class="pkg">trialr</span>'s syntax for efficacy-toxicity
dose-finding outcomes. See <code><a href='efftox_parse_outcomes.html'>efftox_parse_outcomes</a></code> for full
details and examples.</p>
<p>Utility or attractivess scores are calculated in EffTox using L^p norms.
Imagine the first quadrant of a scatter plot with prob_eff along the x-axis
and prob_tox along the y-axis.
The point (1, 0) (i.e. guaranteed efficacy &amp; no toxicity) is the holy grail.
The neutral contour intersects the points (eff0, 0), (1, tox1) and
(eff_star, tox_star). A unique curve intersects these three points and
identifies a value for p, the exponent in the L^p norm. On this neutral-
utility contour, scores are equal to zero. A family of curves with different
utility scores is defined that are "parallel" to this neutral curve.
Points with probabilities of efficacy and toxicity that are nearer to (1, 0)
will yield greater scores, and vice-versa.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Thall, P., &amp; Cook, J. (2004). Dose-Finding Based on Efficacy-Toxicity
    Trade-Offs. Biometrics, 60(3), 684–693.</p>
<p>Thall, P., Herrick, R., Nguyen, H., Venier, J., &amp; Norris, J. (2014).
    Effective sample size for computing prior hyperparameters in Bayesian
    phase I-II dose-finding. Clinical Trials, 11(6), 657–666.
    https://doi.org/10.1177/1740774514547397</p>
<p>Brock, K., Billingham, L., Copland, M., Siddique, S., Sirovica, M., &amp;
    Yap, C. (2017). Implementing the EffTox dose-finding design in the
    Matchpoint trial. BMC Medical Research Methodology, 17(1), 112.
    https://doi.org/10.1186/s12874-017-0381-x</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='efftox_fit-class.html'>efftox_fit</a></code>
  <code><a href='stan_efftox_demo.html'>stan_efftox_demo</a></code>
  <code><a href='efftox_process.html'>efftox_process</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># This model is presented in Thall et al. (2014)</span>
<span class='no'>mod1</span> <span class='kw'>&lt;-</span> <span class='fu'>stan_efftox</span>(<span class='st'>'1N 2E 3B'</span>,
                     <span class='kw'>real_doses</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>1.0</span>, <span class='fl'>2.0</span>, <span class='fl'>4.0</span>, <span class='fl'>6.6</span>, <span class='fl'>10.0</span>),
                     <span class='kw'>efficacy_hurdle</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>toxicity_hurdle</span> <span class='kw'>=</span> <span class='fl'>0.3</span>,
                     <span class='kw'>p_e</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>p_t</span> <span class='kw'>=</span> <span class='fl'>0.1</span>,
                     <span class='kw'>eff0</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>tox1</span> <span class='kw'>=</span> <span class='fl'>0.65</span>,
                     <span class='kw'>eff_star</span> <span class='kw'>=</span> <span class='fl'>0.7</span>, <span class='kw'>tox_star</span> <span class='kw'>=</span> <span class='fl'>0.25</span>,
                     <span class='kw'>alpha_mean</span> <span class='kw'>=</span> -<span class='fl'>7.9593</span>, <span class='kw'>alpha_sd</span> <span class='kw'>=</span> <span class='fl'>3.5487</span>,
                     <span class='kw'>beta_mean</span> <span class='kw'>=</span> <span class='fl'>1.5482</span>, <span class='kw'>beta_sd</span> <span class='kw'>=</span> <span class='fl'>3.5018</span>,
                     <span class='kw'>gamma_mean</span> <span class='kw'>=</span> <span class='fl'>0.7367</span>, <span class='kw'>gamma_sd</span> <span class='kw'>=</span> <span class='fl'>2.5423</span>,
                     <span class='kw'>zeta_mean</span> <span class='kw'>=</span> <span class='fl'>3.4181</span>, <span class='kw'>zeta_sd</span> <span class='kw'>=</span> <span class='fl'>2.4406</span>,
                     <span class='kw'>eta_mean</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>eta_sd</span> <span class='kw'>=</span> <span class='fl'>0.2</span>,
                     <span class='kw'>psi_mean</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>psi_sd</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>123</span>)

<span class='co'># Shorthand for the above is:</span>
<span class='no'>mod2</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='stan_efftox_demo.html'>stan_efftox_demo</a></span>(<span class='st'>'1N 2E 3B'</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>123</span>)

<span class='co'># the seed is passed to the Stan sampler. The usual Stan sampler params like</span>
<span class='co'># cores, iter, chains etc are passed on too via the ellipsis operator.</span>
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Kristian Brock <a href='mailto:kristian.brock@gmail.com'>kristian.brock@gmail.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Kristian Brock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

