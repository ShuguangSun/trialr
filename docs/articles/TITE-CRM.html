<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Time-to-Event Continual Reassessment Method • trialr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Time-to-Event Continual Reassessment Method">
<meta property="og:description" content="trialr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trialr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/BEBOP.html">BEBOP in PePS2</a>
    </li>
    <li>
      <a href="../articles/CRM-pathways.html">Dose pathways with CRM</a>
    </li>
    <li>
      <a href="../articles/CRM-visualisation.html">Visualisation with CRM</a>
    </li>
    <li>
      <a href="../articles/CRM.html">Continual Reassessment Method</a>
    </li>
    <li>
      <a href="../articles/EffTox.html">EffTox</a>
    </li>
    <li>
      <a href="../articles/HierarchicalBayesianResponse.html">Hierarchical Bayesian Model for Binary Responses</a>
    </li>
    <li>
      <a href="../articles/LevyCaseStudy.html">CRM Case Study 1 - Levy et al (2006)</a>
    </li>
    <li>
      <a href="../articles/TITE-CRM.html">Time-to-Event Continual Reassessment Method</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/brockk/trialr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Time-to-Event Continual Reassessment Method</h1>
                        <h4 class="author">Kristian Brock</h4>
            
            <h4 class="date">2020-04-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/brockk/trialr/blob/master/vignettes/TITE-CRM.Rmd"><code>vignettes/TITE-CRM.Rmd</code></a></small>
      <div class="hidden name"><code>TITE-CRM.Rmd</code></div>

    </div>

    
    
<p>This vignette concerns the <em>Time to Event Continual Reassessment Method</em> (TITE-CRM) dose-finding clinical trial design.</p>
<p><span class="citation">Cheung and Chappell (2000)</span> introduced TITE-CRM as a variant of the regular <a href="CRM.html">CRM</a> [OQuigley1990] that handles late-onset toxicities. Dose-finding trials tend to use a short toxicity window after the commencement of therapy, during which each patient is evaluated for the presence or absence of dose-limiting toxicity (DLT). This approach works well in treatments like chemotherapy where toxic reactions are expected to manifest relatively quickly. In contrast, one of the hallmarks of radiotherapy, for instance, is that related adverse reactions can manifest many months after the start of treatment. A similar phenomenon may arise with immunotherapies.</p>
<p>In adaptive dose-finding clinical trials, where doses are selected mid-trial in response to the outcomes experienced by patients evaluated hitherto, late-onset toxic events present a distinct methodological challenge. Naturally, the toxicity window will need to be long enough to give the trial a good chance of observing events of interest. If, however, we wait until each patient completes the evaluation window before using their outcome to forecast the best dose, the trial may take an infeasibly long time and ignore pertinent interim data.</p>
<p>TITE-CRM presents a solution by introducing the notion of a <em>partial tolerance</em> event. If a patient is half way through the evaluation window and has not yet experienced toxicity, we may say that they have experienced half a tolerance. This simple novelty allows partial information to be used in dose-recommendation decisions. If the patient goes on to complete the window with no toxic reaction, they will be regarded as having completely tolerated treatment, as is normally the case with CRM and other dose-finding algorithms. This notion of partial events is only applied to tolerances, however. If a patient experiences toxicity at any point during the evaluation window, they are immediately regarded as having experienced 100% of a DLT event.</p>
<p>To illustrate TITE-CRM mathematically, we start with the likelihood from the plain vanilla <a href="CRM.html">CRM</a>. Let <span class="math inline">\(Y_i\)</span> be a random variable taking values <span class="math inline">\(\{0, 1\}\)</span> reflecting the absence and presence of DLT respectively in patient <span class="math inline">\(i\)</span>. A patient administered dose <span class="math inline">\(x_i\)</span> has estimated probability of toxicity <span class="math inline">\(F(x_i, \theta)\)</span>, where <span class="math inline">\(\theta\)</span> represents the set of model parameters. The likelihood component arising from patient <span class="math inline">\(i\)</span> is</p>
<p><span class="math display">\[ F(x_i, \theta)^{Y_i} (1 - F(x_i, \theta))^{1-Y_i} \]</span></p>
<p>and the aggregate likelihood after the evaluation of <span class="math inline">\(J\)</span> patients is</p>
<p><span class="math display">\[ L_J(\theta) = \prod_{i=1}^J \left\{ F(x_i, \theta) \right\}^{Y_i} \left\{ 1 - F(x_i, \theta) \right\}^{1-Y_i} \]</span></p>
<p><span class="citation">Cheung and Chappell (2000)</span> observed that each patient may provide a weight, <span class="math inline">\(w_i\)</span>, reflecting the extend to which their outcome has been evaluated. The weighted likelihood is</p>
<p><span class="math display">\[ L_J(\theta) = \prod_{i=1}^J \left\{ w_i F(x_i, \theta) \right\}^{Y_i} \left\{ 1 - w_i F(x_i, \theta) \right\}^{1-Y_i} \]</span></p>
<p>TITE-CRM weights the outcomes according to the extend to which patients have completed the evaluation period. To illustrate the design, we reproduce the example given on p.124 of <span class="citation">Cheung (2011)</span>. Four patients have been treated at dose-level 3 and all are part-way through the 126-day toxicity evaluation window.</p>
<p>The authors use the empiric model so that there is one parameter, <span class="math inline">\(\theta = \beta\)</span>, the dose-toxicity relation is <span class="math inline">\(F(x_i, \beta) = x_i^{exp(\beta)}\)</span>, and a <span class="math inline">\(N(0, \sigma_{\beta}^2)\)</span> prior is specified on <span class="math inline">\(\beta\)</span>.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">trialr</span>)

<span class="no">fit</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/stan_crm.html">stan_crm</a></span>(<span class="kw">skeleton</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.05</span>, <span class="fl">0.12</span>, <span class="fl">0.25</span>, <span class="fl">0.40</span>, <span class="fl">0.55</span>), <span class="kw">target</span> <span class="kw">=</span> <span class="fl">0.25</span>,
                <span class="kw">doses_given</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>),
                <span class="kw">tox</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>),
                <span class="kw">weights</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">73</span>, <span class="fl">66</span>, <span class="fl">35</span>, <span class="fl">28</span>) / <span class="fl">126</span>,
                <span class="kw">model</span> <span class="kw">=</span> <span class="st">'empiric'</span>, <span class="kw">beta_sd</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span>(<span class="fl">1.34</span>), <span class="kw">seed</span> <span class="kw">=</span> <span class="fl">123</span>)</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">fit</span>
<span class="co">#&gt;   Patient Dose Toxicity    Weight</span>
<span class="co">#&gt; 1       1    3        0 0.5793651</span>
<span class="co">#&gt; 2       2    3        0 0.5238095</span>
<span class="co">#&gt; 3       3    3        0 0.2777778</span>
<span class="co">#&gt; 4       4    3        0 0.2222222</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Dose Skeleton N Tox ProbTox MedianProbTox ProbMTD</span>
<span class="co">#&gt; 1    1     0.05 0   0  0.0749       0.00703  0.1315</span>
<span class="co">#&gt; 2    2     0.12 0   0  0.1171       0.02993  0.0993</span>
<span class="co">#&gt; 3    3     0.25 4   0  0.1886       0.10083  0.1507</span>
<span class="co">#&gt; 4    4     0.40 0   0  0.2779       0.21949  0.1752</span>
<span class="co">#&gt; 5    5     0.55 0   0  0.3845       0.37180  0.4432</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; The model targets a toxicity level of 0.25.</span>
<span class="co">#&gt; The dose with estimated toxicity probability closest to target is 4.</span>
<span class="co">#&gt; The dose most likely to be the MTD is 5.</span>
<span class="co">#&gt; Model entropy: 1.45</span></pre></body></html></div>
<p>The first table gives a summary of the patient information. We see that each patient has received dose-level 3, none have yet experienced toxicity although all are only partly through the evaluation window. The second table summarises dose-level information. We see that dose-level 4 has estimated mean probability of toxicity closest to the target 25%, although dose-level 5 is the dose most frequently advocated by the dose-toxicity curves generated by MCMC. This exuberance should be tempered by the fact that we have not yet treated any patients at dose-level 4, although it is currently recommended for the next patient.</p>
<p>A TITE-CRM option is provided for each of the CRM variants implemented in <code>trialr</code>. It is enabled simply by specifying the <code>weights</code> parameter. The necessity to provide weights under TITE-CRM rather obscures the attraction of using the outcome string approach of describing patients’ doses and DLT outcomes demonstrated in the <a href="CRM.html">CRM</a> vignette. Thus, we provide <code>stan_crm</code> the three vectors <code>doses_given</code>, <code>tox</code> and <code>weights</code> to convey the patient-level information.</p>
<p>The object returned by <code>stan_crm</code> is the same, regardless of whether <code>weights</code> are provided or not. Thus, all of the visualistion methods presented in the <a href="CRM-visualisation.html">CRM visualistion vignette</a> apply.</p>
<div id="other-crm-vignettes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-crm-vignettes" class="anchor"></a>Other CRM vignettes</h2>
<p>There are many vignettes illuminating the CRM in <code>trialr</code>:</p>
<ul>
<li><a href="CRM.html">An introduction to CRM in ‘trialr’</a></li>
<li><a href="CRM-visualisation.html">Visualisation in CRM</a></li>
<li><a href="TITE-CRM.html">TITE-CRM</a></li>
<li><a href="CRM-pathways.html">Pathways and stopping in CRM</a></li>
<li><a href="LevyCaseStudy.html">Case study using Levy, et al. (2006)</a></li>
<li>Simulation</li>
</ul>
</div>
<div id="trialr" class="section level1">
<h1 class="hasAnchor">
<a href="#trialr" class="anchor"></a>trialr</h1>
<p><code>trialr</code> is available at <a href="https://github.com/brockk/trialr" class="uri">https://github.com/brockk/trialr</a> and <a href="https://CRAN.R-project.org/package=trialr" class="uri">https://CRAN.R-project.org/package=trialr</a></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-Cheung2011">
<p>Cheung, Ying Kuen. 2011. <em>Dose Finding by the Continual Reassessment Method</em>. New York: Chapman &amp; Hall / CRC Press.</p>
</div>
<div id="ref-Cheung2000">
<p>Cheung, Y K, and R Chappell. 2000. “Sequential Designs for Phase I Clinical Trials with Late-Onset Toxicities.” <em>Biometrics</em> 56 (4): 1177–82.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kristian Brock.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
